<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=fpjTOVmNbO4Lz34iLyptLTi9jKYd1gJzj5O2gWsEpXoyck2WCYPEMNySjZN0CHedXUiLXDrKjJ-HZ12gdSWW_7k19HnzO8O6rd5KLwHyN2s');ol.lst-kix_rg9v9zvyuxzb-6{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-7{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-8{list-style-type:none}.lst-kix_rg9v9zvyuxzb-4>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-4}ol.lst-kix_rg9v9zvyuxzb-8.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-8 0}ul.lst-kix_texyhxtn8mxf-0{list-style-type:none}ul.lst-kix_texyhxtn8mxf-1{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-1.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-1 0}ol.lst-kix_rg9v9zvyuxzb-5.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-5 0}.lst-kix_rg9v9zvyuxzb-5>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-5}.lst-kix_rg9v9zvyuxzb-6>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-6,decimal) ". "}.lst-kix_rg9v9zvyuxzb-7>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-7,lower-latin) ". "}.lst-kix_rg9v9zvyuxzb-4>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-4,lower-latin) ". "}.lst-kix_rg9v9zvyuxzb-5>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-5,lower-roman) ". "}.lst-kix_rg9v9zvyuxzb-8>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-8,lower-roman) ". "}.lst-kix_rg9v9zvyuxzb-0>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-0}.lst-kix_rg9v9zvyuxzb-3>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-3}.lst-kix_rg9v9zvyuxzb-6>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-6}.lst-kix_rg9v9zvyuxzb-0>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-0,decimal) ". "}.lst-kix_rg9v9zvyuxzb-1>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-1,lower-latin) ". "}.lst-kix_rg9v9zvyuxzb-2>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-2,lower-roman) ". "}.lst-kix_rg9v9zvyuxzb-3>li:before{content:"" counter(lst-ctn-kix_rg9v9zvyuxzb-3,decimal) ". "}ol.lst-kix_rg9v9zvyuxzb-0{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-1{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-2.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-2 0}ol.lst-kix_rg9v9zvyuxzb-2{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-3{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-4{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-5{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-3.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-3 0}.lst-kix_texyhxtn8mxf-1>li:before{content:"\0025cb  "}.lst-kix_rg9v9zvyuxzb-7>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-7}.lst-kix_texyhxtn8mxf-0>li:before{content:"\0025cf  "}.lst-kix_texyhxtn8mxf-2>li:before{content:"\0025a0  "}.lst-kix_rg9v9zvyuxzb-1>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-1}.lst-kix_texyhxtn8mxf-3>li:before{content:"\0025cf  "}.lst-kix_texyhxtn8mxf-5>li:before{content:"\0025a0  "}.lst-kix_texyhxtn8mxf-4>li:before{content:"\0025cb  "}.lst-kix_texyhxtn8mxf-6>li:before{content:"\0025cf  "}ol.lst-kix_rg9v9zvyuxzb-6.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-6 0}ol.lst-kix_rg9v9zvyuxzb-0.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-0 0}.lst-kix_rg9v9zvyuxzb-8>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-8}.lst-kix_rg9v9zvyuxzb-2>li{counter-increment:lst-ctn-kix_rg9v9zvyuxzb-2}ol.lst-kix_rg9v9zvyuxzb-4.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-4 0}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}ul.lst-kix_texyhxtn8mxf-8{list-style-type:none}ul.lst-kix_texyhxtn8mxf-6{list-style-type:none}.lst-kix_texyhxtn8mxf-8>li:before{content:"\0025a0  "}ul.lst-kix_texyhxtn8mxf-7{list-style-type:none}ul.lst-kix_texyhxtn8mxf-4{list-style-type:none}.lst-kix_texyhxtn8mxf-7>li:before{content:"\0025cb  "}ul.lst-kix_texyhxtn8mxf-5{list-style-type:none}ul.lst-kix_texyhxtn8mxf-2{list-style-type:none}ul.lst-kix_texyhxtn8mxf-3{list-style-type:none}ol.lst-kix_rg9v9zvyuxzb-7.start{counter-reset:lst-ctn-kix_rg9v9zvyuxzb-7 0}ol{margin:0;padding:0}table td,table th{padding:0}.c2{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Calibri";font-style:normal}.c42{padding-top:24pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c17{padding-top:12pt;padding-bottom:2pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c5{padding-top:0pt;text-indent:36pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c24{padding-top:18pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c10{padding-top:14pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c31{padding-top:11pt;padding-bottom:2pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Consolas";font-style:normal}.c8{padding-top:0pt;padding-bottom:10pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c26{padding-top:0pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c35{-webkit-text-decoration-skip:none;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-family:"Calibri";font-style:normal}.c16{color:#666666;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Calibri";font-style:normal}.c19{color:#000000;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Calibri";font-style:normal}.c36{text-decoration:none;vertical-align:baseline;font-size:18pt;font-family:"Cambria";font-style:normal}.c37{text-decoration:none;vertical-align:baseline;font-size:7pt;font-family:"Consolas";font-style:normal}.c33{text-decoration:none;vertical-align:baseline;font-size:8pt;font-family:"Consolas";font-style:normal}.c21{text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c41{text-decoration:none;vertical-align:super;font-family:"Calibri";font-style:normal}.c3{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c40{text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Cambria"}.c12{font-weight:400;font-size:9pt;font-family:"Consolas"}.c30{text-decoration:none;vertical-align:baseline;font-family:"Calibri"}.c39{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c9{color:inherit;text-decoration:inherit}.c34{font-size:9pt;font-family:"Consolas"}.c14{border:1px solid black;margin:5px}.c23{margin-left:14.2pt;text-indent:-14.2pt}.c6{color:#000000;font-weight:400}.c38{font-size:10pt;font-style:normal}.c15{padding:0;margin:0}.c18{margin-left:36pt}.c22{color:#000000}.c32{color:#666666}.c27{text-indent:36pt}.c20{height:11pt}.c0{font-style:italic}.c28{padding-left:0pt}.c29{background-color:#ffff00}.c11{font-weight:700}.c13{font-size:11pt}.c25{font-weight:400}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:6pt;font-family:"Cambria";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Cambria";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Calibri"}p{margin:0;color:#000000;font-size:11pt;font-family:"Calibri"}h1{padding-top:24pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:6pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:14pt;color:#666666;font-weight:700;font-size:12pt;padding-bottom:4pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}h5{padding-top:11pt;color:#666666;font-weight:700;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:10pt;color:#666666;font-size:10pt;padding-bottom:2pt;font-family:"Calibri";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c39 doc-content"><p class="c42 title" id="h.e7q5jxhg3ig3"><span>Five Safes</span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup><span>&nbsp;Crate</span><sup><a href="#cmnt2" id="cmnt_ref2">[b]</a></sup><span class="c22 c11 c36">&nbsp;profile</span></p><p class="c8"><span class="c2">Authors:</span></p><ol class="c15 lst-kix_rg9v9zvyuxzb-0 start" start="1"><li class="c8 c18 c28 li-bullet-0"><span>Stian Soiland-Reyes, The University of Manchester </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://orcid.org/0000-0001-9842-9718&amp;sa=D&amp;source=editors&amp;ust=1683740231112358&amp;usg=AOvVaw2aGu9vqXx87T7nMepWfHQj">https://orcid.org/0000-0001-9842-9718</a></span><span class="c2">&nbsp;</span></li><li class="c8 c18 c28 li-bullet-0"><span class="c2">Stuart Wheater</span></li></ol><p class="c24 subtitle" id="h.dqceevkr3ulc"><span class="c32 c0 c25 c40">TRE-FX draft in development </span></p><p class="c8"><span class="c6 c0 c13 c30">(comments and suggestions welcome)</span></p><p class="c8"><span>Permalink: </span><span class="c3 c12"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/five-safes/0.1-DRAFT&amp;sa=D&amp;source=editors&amp;ust=1683740231113017&amp;usg=AOvVaw2l4ydJO6Om99GWXjELB7GA">https://w3id.org/ro/five-safes/0.2-DRAFT</a></span><span class="c12">&nbsp;</span><span class="c12 c29">(TODO)</span></p><p class="c8"><span>This document specifies a draft profile of </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/crate&amp;sa=D&amp;source=editors&amp;ust=1683740231113359&amp;usg=AOvVaw3SZ8Km76xPPOcRMEIIY2HL">RO-Crate</a></span><span>&nbsp;for the purpose of </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://trefx.uk/implementation&amp;sa=D&amp;source=editors&amp;ust=1683740231113543&amp;usg=AOvVaw1GakXoW2sMYD-iBQAq-Qmv">TRE-FX implementation</a></span><span class="c2">&nbsp;of workflow execution in a distributed trusted research environment (TRE). </span></p><p class="c8"><span class="c0">The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in BCP 14 [</span><span class="c3 c0"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC2119&amp;sa=D&amp;source=editors&amp;ust=1683740231113859&amp;usg=AOvVaw386tb2iMDtjS3k1hp_Cfb1">RFC2119</a></span><span class="c0">] [</span><span class="c3 c0"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC8174&amp;sa=D&amp;source=editors&amp;ust=1683740231114044&amp;usg=AOvVaw1DM14a_hwQqzvv3XicMVU8">RFC8174</a></span><span class="c30 c6 c0 c13">] when, and only when, they appear in all capitals, as shown here.</span></p><p class="c8 c18"><span>Note that all references to schema.org types/properties/instances use the prefix </span><span class="c12">http://schema.org/</span><span class="c2">&nbsp;(not https) to correspond with the official JSON-LD context.</span></p><h2 class="c24" id="h.wm0o4slemu9b"><span class="c19 c11">Overview</span></h2><p class="c8"><span>A Five Safes Crate </span><span>represents</span><span>&nbsp;a unit of computational access to sensitive information which is managed in </span><span>accordance</span><span>&nbsp;</span><span>with a</span><span>&nbsp;set of principles conforming to the 5 safe framework.</span></p><h2 class="c24" id="h.akgun1xbdqy2"><span class="c19 c11">Archive serialisation</span></h2><p class="c8"><span>A compliant Five Safes Crate SHOULD be stored and transferred as an </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://www.pkware.com/documents/casestudies/APPNOTE.TXT&amp;sa=D&amp;source=editors&amp;ust=1683740231114971&amp;usg=AOvVaw0l21PJVIUG6u41BlXGFRT7">ZIP archive</a></span><span>&nbsp;containing a single </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html%23combining-with-other-packaging-schemes&amp;sa=D&amp;source=editors&amp;ust=1683740231115225&amp;usg=AOvVaw3XdAel6fiIbLc05q_da_qN">BagIt directory</a></span><span>&nbsp;(</span><span class="c0">bag</span><span>) of an arbitrary name,</span><span class="c0">&nbsp;</span><span>which payload </span><span class="c0">data/</span><span>&nbsp;contains the RO-Crate Metadata File </span><span class="c0">ro-crate-metadata.json</span><span class="c2">&nbsp;and any required data files (e.g. inputs). </span></p><p class="c8"><span>Internally a processing TRE MAY choose to unpack a ZIP file to a local file store, </span><span>taking necessary security and performance precautions</span><span>&nbsp;(see </span><span class="c3"><a class="c9" href="#h.nq7kiyxq67m3">Security considerations</a></span><span class="c2">).</span></p><p class="c8"><span>The BagIt </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.rfc-editor.org/rfc/rfc8493.html%23section-2.1.3&amp;sa=D&amp;source=editors&amp;ust=1683740231116008&amp;usg=AOvVaw3c3hB1oWHvJmp7Jxo4dwNq">payload manifest</a></span><span>&nbsp;[</span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/rfc8493&amp;sa=D&amp;source=editors&amp;ust=1683740231116210&amp;usg=AOvVaw0_A1Pxc333mm4f__Scjn_l">RFC8493</a></span><span>] MUST be present using sha-512 checksums, and the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.rfc-editor.org/rfc/rfc8493.html%23section-2.2.1&amp;sa=D&amp;source=editors&amp;ust=1683740231116420&amp;usg=AOvVaw3niU1NglNR7llmXUzdp4iD">tag manifest</a></span><span>&nbsp;SHOULD be included as sha-512 [</span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.6028/NIST.FIPS.180-4&amp;sa=D&amp;source=editors&amp;ust=1683740231116719&amp;usg=AOvVaw3FBIkIt7GaJrfJQBan-zN4">FIPS 180-4</a></span><span>]. Payload and tag manifests using other checksums MAY be included, taking care to exclude </span><span class="c0">tagmanifest-*</span><span class="c2">&nbsp;from their checksums.</span></p><p class="c8"><span class="c2">Example:</span></p><p class="c1"><span class="c33 c6">query-12389/</span></p><p class="c1"><span class="c33 c6">&nbsp; | &nbsp; bagit.txt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # MUST indicate BagIt 1.0 or later</span></p><p class="c1"><span class="c33 c6">&nbsp; | &nbsp; bag-info.txt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# As per BagIt specification</span></p><p class="c1"><span class="c33 c6">&nbsp; | &nbsp; manifest-sha512.txt &nbsp; &nbsp; &nbsp; # As per BagIt specification</span></p><p class="c1"><span class="c6 c33">&nbsp; | &nbsp; tagmanifest-sha512.txt &nbsp; &nbsp;# As per BagIt specification</span></p><p class="c1"><span class="c33 c6">&nbsp; | &nbsp; fetch.txt &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Optional, per BagIt Specification</span></p><p class="c1"><span class="c33 c6">&nbsp; | &nbsp; data/ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Payload: RO-Crate root directory</span></p><p class="c1"><span class="c33 c6">&nbsp; &nbsp; &nbsp; | &nbsp; ro-crate-metadata.json &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # RO-Crate Metadata File MUST be present</span></p><p class="c1"><span class="c33 c6">&nbsp; &nbsp; &nbsp; | &nbsp; [payload files and directories] &nbsp;# 1 or more SHOULD be present</span></p><p class="c8 c20"><span class="c2"></span></p><h3 class="c10" id="h.a47dfsnz074v"><span class="c16 c11">BagIt expectations</span></h3><p class="c8"><span>The </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html%23combining-with-other-packaging-schemes&amp;sa=D&amp;source=editors&amp;ust=1683740231118175&amp;usg=AOvVaw1MKx923LYVjQMbuNm1_6Hr">RO-Crate BagIt expectations</a></span><span>&nbsp;for </span><span class="c0">Adding RO-Crate to Bagit </span><span>&nbsp;MUST be followed. The </span><span class="c0">bag-info.txt</span><span>&nbsp;MUST include a generated </span><span class="c0">External-Identifier:</span><span>&nbsp;field which SHOULD be a UUID URN [</span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/rfc4122&amp;sa=D&amp;source=editors&amp;ust=1683740231118554&amp;usg=AOvVaw0Huld8jBxHHJjd15nvNVVS">rfc4122</a></span><span class="c2">], e.g.:</span></p><p class="c8"><span class="c4">External-Identifier: urn:uuid:9796155a-fe44-4614-89b8-71945f718ffb</span></p><p class="c8"><span>The identifier of the </span><span class="c0">External-Identifier </span><span>represents this crate as a request and subsequent response, and SHOULD be freshly generated for each request. </span><span>It is RECOMMENDED to </span><span class="c0">not</span><span>&nbsp;modify this identifier as the Five Safes Crate progresses through the distributed TRE processing, unless it is recognized as an </span><span>previous execution</span><sup><a href="#cmnt3" id="cmnt_ref3">[c]</a></sup><sup><a href="#cmnt4" id="cmnt_ref4">[d]</a></sup><span class="c2">. </span></p><p class="c8"><span>Note that as the ro-crate-metadata.json establishes payload directory data/ as the RO-Crate Root it can only reference files and directories there within, the RO-Crate MUST NOT reference tag files like </span><span class="c12">../fetch.txt</span><span>&nbsp;or other relative paths outside the Bag (see </span><span class="c3"><a class="c9" href="#h.nq7kiyxq67m3">Security considerations</a></span><span class="c2">).</span></p><h3 class="c10" id="h.i3ip973mivji"><span class="c16 c11">Zip expectations</span></h3><p class="c8"><span>The ZIP archive MUST only contain a single top-level entry for the bag directory, identified by the </span><span class="c0">bagit.txt</span><span>&nbsp;marker. For interoperability in terms of ZIP features, implementations SHOULD follow </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.w3.org/publishing/epub32/epub-ocf.html%23sec-zip-container-zipreqs&amp;sa=D&amp;source=editors&amp;ust=1683740231119717&amp;usg=AOvVaw3PInzdAezIoq3dZngmaJ0T">guidance for an OSF ZIP Container</a></span><span>&nbsp;(ignoring </span><span class="c0">OCF Abstract Container </span><span class="c2">requirements).</span></p><h2 class="c24" id="h.u751x9rwgfgv"><span class="c19 c11">Metadata file expectations</span></h2><p class="c1"><span>The RO-Crate Metadata File MUST conform to </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.google.com/url?q%3Dhttps://www.researchobject.org/ro-crate/1.2-DRAFT/%26sa%3DD%26source%3Ddocs%26ust%3D1680005136018780%26usg%3DAOvVaw0olz0R6RJatjMIFdYoAWhW&amp;sa=D&amp;source=editors&amp;ust=1683740231120277&amp;usg=AOvVaw1wi1Waov5SU5CZz5q9SPg9">RO-Crate 1.2</a></span><sup><a href="#cmnt5" id="cmnt_ref5">[e]</a></sup><span>&nbsp;(or later minor version). The compliant version MUST be declared in the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.2-DRAFT/root-data-entity.html%23ro-crate-metadata-file-descriptor&amp;sa=D&amp;source=editors&amp;ust=1683740231120598&amp;usg=AOvVaw3EpSp4mXG4V9oWWwhWor5v">metadata file descriptor</a></span><span>:<br><br></span><span class="c4">&nbsp; &nbsp;{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;CreativeWork&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;ro-crate-metadata.json&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;about&quot;: {&quot;@id&quot;: &quot;./&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/ro/crate/1.2-DRAFT&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp;}</span></p><p class="c1 c20"><span class="c4"></span></p><p class="c8"><span>The </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.2-DRAFT/root-data-entity.html%23direct-properties-of-the-root-data-entity&amp;sa=D&amp;source=editors&amp;ust=1683740231121470&amp;usg=AOvVaw1EYdot7XDdcM8mpPs4qxm1">root data entity</a></span><span>&nbsp;of a Five Saves Crate MUST have the @id equal </span><span class="c12">&quot;./&quot;</span><span>&nbsp;(as it is stored within the BagIt ZIP archive). It MAY have an additional </span><span class="c3 c12"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/metadata.html%23recommended-identifiers&amp;sa=D&amp;source=editors&amp;ust=1683740231121825&amp;usg=AOvVaw1hNS_lee06ysDYschK8o2Y">identifier</a></span><span>.</span></p><h3 class="c10" id="h.p9qcf7kions2"><span class="c16 c11">Profile conformance</span></h3><p class="c8"><span>Crates conforming to this profile specification SHOULD indicate this on the Root Data Entity using </span><span class="c0">conformsTo</span><span class="c2">:</span></p><p class="c1"><span class="c4">&nbsp; &nbsp;{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;./&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;Dataset&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/ro/five-safes/0.1-DRAFT&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;hasPart&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;mainEntity&quot;: {&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289?version=1&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;mentions&quot;: {&quot;@id&quot;: &quot;#query-37252371-c937-43bd-a0a7-3680b48c0538&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;sourceOrganization&quot;: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;@id&quot;: &quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; },<br> &nbsp; &nbsp;{<br> &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;https://w3id.org/ro/five-safes/0.1-DRAFT&quot;,<br> &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;Profile&quot;,<br> &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;Five Saves Crate profile&quot;<br> &nbsp; &nbsp;}</span></p><p class="c8 c20"><span class="c2"></span></p><p class="c8"><span>Note that </span><span class="c0">licence</span><span>&nbsp;and </span><span class="c0">datePublished </span><span>is not required in a submitted crate, but SHOULD be included for a published crate (see </span><span class="c3"><a class="c9" href="#h.856k9eashjmk">Publishing Phase</a></span><span>).</span></p><h3 class="c10" id="h.vt9rb4cwhsa5"><span class="c16 c11">Referencing a Workflow Crate</span></h3><p class="c8"><span>The metadata file MUST reference a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/workflowhub/workflow-ro-crate/1.0&amp;sa=D&amp;source=editors&amp;ust=1683740231123528&amp;usg=AOvVaw0_xIj9UJ8JE9HLyLiLrPHL">Workflow RO-Crate</a></span><span>&nbsp;</span><span class="c0">Dataset </span><span>as its </span><span class="c0">mainEntity</span><span class="c2">, indirectly indicating the workflow to execute. </span></p><p class="c8"><span>The identifier SHOULD be a permalink or versioned URL (e.g. </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://workflowhub.eu/workflows/289?version%3D1&amp;sa=D&amp;source=editors&amp;ust=1683740231124148&amp;usg=AOvVaw2Vv6isoCmhWmWV9tTbEz-y">https://workflowhub.eu/workflows/289?version=1</a></span><span>) or MAY be a nested directory within the BagIt payload directory (e.g. </span><span class="c12">&quot;workflow289.1/&quot;</span><span class="c2">).</span></p><p class="c8"><span class="c11">Note</span><span>: unlike in the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/workflow-run-crate/profiles/0.1/workflow_run_crate&amp;sa=D&amp;source=editors&amp;ust=1683740231124929&amp;usg=AOvVaw0LckB_scfFYZyPRECwdeXq">Workflow Run profile</a></span><span>, the programming language of the workflow and its other metadata are not expressed in this RO-Crate, but within the referenced Workflow RO-Crate. The </span><span class="c0">programmingLanguage</span><span>&nbsp;inside the Workflow RO-Crate SHOULD be either </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/workflowhub/workflow-ro-crate%23cwl&amp;sa=D&amp;source=editors&amp;ust=1683740231125418&amp;usg=AOvVaw1w8FmEua3BBHPgN1alVbR9">https://w3id.org/workflowhub/workflow-ro-crate#cwl</a></span><span>&nbsp;or </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/workflowhub/workflow-ro-crate%23nextflow&amp;sa=D&amp;source=editors&amp;ust=1683740231125733&amp;usg=AOvVaw0Fq1HNu041poYh6hKXHo6f">https://w3id.org/workflowhub/workflow-ro-crate#nextflow</a></span><span class="c2">.</span></p><p class="c8"><span>See </span><span class="c3"><a class="c9" href="#h.nq7kiyxq67m3">security considerations</a></span><span class="c2">&nbsp;for workflow referencing and execution. </span></p><h4 class="c17" id="h.svx3e0hfb6k9"><span class="c30 c32 c0 c13 c25">Finding the RO-Crate archive</span></h4><p class="c8"><span>If the identifier is a URI, an URL to the downloadable Workflow RO-Crate ZIP archive SHOULD be included with </span><span class="c0">distribution</span><span>, otherwise clients SHOULD </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://signposting.org/adopters/%23workflowhub&amp;sa=D&amp;source=editors&amp;ust=1683740231126457&amp;usg=AOvVaw28b_kwtEyiZErfinqMN-IH">use Signposting</a></span><span>&nbsp;to find the link to the RO-Crate by looking for the link with </span><span class="c12">rel=&quot;item&quot; type=&quot;application/zip&quot; profile=&quot;</span><span class="c12">https://w3id.org/ro/crate</span><span class="c12">&quot;</span><span>&nbsp;- for instance:</span></p><p class="c1"><span class="c4">curl -I &quot;https://workflowhub.eu/workflows/289?version=1&quot;</span></p><p class="c1 c20"><span class="c4"></span></p><p class="c1"><span class="c4">HTTP/1.1 200 OK</span></p><p class="c1"><span class="c4">Content-Type: text/html; charset=UTF-8</span></p><p class="c1"><span class="c12">&lt;</span><span class="c11 c34">https://workflowhub.eu/workflows/289/ro_crate?version=1</span><span class="c4">&gt; ;</span></p><p class="c1"><span class="c12">&nbsp; &nbsp; &nbsp; rel=&quot;</span><span class="c34 c11">item</span><span class="c4">&quot; ;</span></p><p class="c1"><span class="c12">&nbsp; &nbsp; &nbsp; type=&quot;</span><span class="c34 c11">application/zip</span><span class="c4">&quot; ;</span></p><p class="c1"><span class="c12">&nbsp; &nbsp; &nbsp; profile=&quot;</span><span class="c34 c11">https://w3id.org/ro/crate</span><span class="c4">&quot; </span></p><h4 class="c17" id="h.oevsrkcy98c4"><span class="c30 c32 c0 c13 c25">Example:</span></h4><p class="c1 c20"><span class="c4"></span></p><p class="c1"><span class="c4">&nbsp;{</span></p><p class="c1"><span class="c12">&nbsp; &nbsp; &quot;@id&quot;: &quot;</span><span class="c12">https://workflowhub.eu/workflows/289?version=1</span><span class="c4">&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;@type&quot;: &quot;Dataset&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;name&quot;: &quot;CWL Protein MD Setup tutorial with mutations&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/workflowhub/workflow-ro-crate/1.0&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;distribution&quot;: {<br> &nbsp; &nbsp; &nbsp;&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289/ro_crate?version=1&quot;}</span></p><p class="c1"><span class="c4">&nbsp; },</span></p><p class="c1"><span class="c4">&nbsp; {</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289/ro_crate?version=1&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;@type&quot;: &quot;DataDownload&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/ro/crate&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &quot;encodingFormat&quot;: &quot;application/zip&quot;</span></p><p class="c1"><span class="c4">&nbsp; }</span></p><p class="c8 c20"><span class="c2"></span></p><p class="c8"><span>In the above example, the </span><span class="c0">mainEntity</span><span>&nbsp;points to a </span><span class="c0">Dataset</span><span>&nbsp;that conforms to the Workflow RO-Crate Profile and references the ZIP download URI using </span><span class="c0">distribution</span><span>, therefore the client can download the workflow directly without needing to follow Signposting headers.</span></p><h3 class="c10" id="h.zcl7pu7kd4k0"><span class="c16 c11">Requested Workflow Run</span></h3><p class="c8"><span>The metadata file MUST include a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/CreateAction&amp;sa=D&amp;source=editors&amp;ust=1683740231129217&amp;usg=AOvVaw3ZZtSgjClaWHPMoRmx6UEn">CreateAction</a></span><span>, which MUST be referenced from </span><span class="c0">mentions</span><span class="c2">&nbsp;of the root entity. The identifier SHOULD be based on a UUID (different from the BagIt External-Identifier).</span></p><p class="c8"><span>The </span><span>CreateAction </span><sup><a href="#cmnt6" id="cmnt_ref6">[f]</a></sup><sup><a href="#cmnt7" id="cmnt_ref7">[g]</a></sup><span>MUST reference the Workflow Crate using </span><span class="c0">instrument</span><span class="c2">.</span></p><h4 class="c17" id="h.5lws8vt29mzw"><span class="c30 c32 c0 c13 c25">Example:</span></h4><p class="c1"><span class="c4">&nbsp; &nbsp;{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;#query-37252371-c937-43bd-a0a7-3680b48c0538&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;CreateAction&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/PotentialActionStatus&quot;, </span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;agent&quot;: {&quot;@id&quot;: &quot;https://orcid.org/0000-0001-9842-9718&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;instrument&quot;: {&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289?version=1&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;Execute query 12389 on workflow &quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;object&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;input1.txt&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; }</span></p><p class="c8"><span>The </span><span class="c3"><a class="c9" href="#h.uyr0r2dywnt2">CreateAction&rsquo;s actionStatus</a></span><span>&nbsp;will change during execution.</span></p><h3 class="c10" id="h.lum49c9zz5an"><span class="c16 c11">Requesting Agent</span></h3><p class="c8"><span>The individual person who is requesting the run MUST be indicated as an </span><span class="c0">agent</span><span>&nbsp;from the </span><span class="c0">CreateAction</span><span>, which SHOULD have an </span><span class="c0">affiliation</span><span class="c2">&nbsp;to the organisation they are representing for access control purposes.</span></p><p class="c1"><span class="c4">&nbsp; &nbsp;{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;https://orcid.org/0000-0001-9842-9718&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;Person&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;Stian Soiland-Reyes&quot;,</span></p><p class="c1"><span class="c12">&nbsp; &nbsp; &nbsp; &nbsp; &quot;affiliation&quot;: { &quot;@id&quot;: &quot;</span><span class="c12">https://ror.org/027m9bs27</span><span class="c4">&quot;},<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;memberOf&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ]</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; },</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; {</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;https://ror.org/027m9bs27&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;Organization&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;The University of Manchester&quot;</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; },</span></p><p class="c8 c20"><span class="c2"></span></p><p class="c8"><span class="c11">Note</span><span>: The organisation under </span><span class="c0">affiliation</span><span>&nbsp;is typically the </span><span>employing organisation</span><sup><a href="#cmnt8" id="cmnt_ref8">[h]</a></sup><sup><a href="#cmnt9" id="cmnt_ref9">[i]</a></sup><sup><a href="#cmnt10" id="cmnt_ref10">[j]</a></sup><span>, e.g. a university or hospital. Virtual organisations such as research projects MAY additionally be listed using </span><span class="c0">memberOf</span><span>&nbsp;(see also </span><span class="c0">Responsible Project</span><span class="c2">&nbsp;below).</span></p><h3 class="c10" id="h.x4bgb1x4iw6e"><span class="c16 c11">Responsible Project</span></h3><p class="c8"><span>The project that the request is sent on behalf of, typically related to permission to use a TRE, MUST be indicated from the root dataset using </span><span class="c0">sourceOrganization</span><span>&nbsp;to a </span><span class="c3 c0"><a class="c9" href="https://www.google.com/url?q=https://schema.org/Project&amp;sa=D&amp;source=editors&amp;ust=1683740231133101&amp;usg=AOvVaw2Q4GdVKXAS5ZGyxZvMI68k">Project</a></span><span>. The responsible project SHOULD be referenced from the requesting agent&rsquo;s </span><span class="c0">memberOf</span><span class="c2">. </span></p><p class="c8"><span class="c11">Note</span><span>: The </span><span class="c0">responsible project</span><span>&nbsp;is not necessarily a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/ResearchProject&amp;sa=D&amp;source=editors&amp;ust=1683740231133665&amp;usg=AOvVaw0DOxnP6HrUseC9voEa0mmw">ResearchProject</a></span><span>&nbsp;corresponding to a funded grant, but may be more specific studies within a funded project. Various TREs may have different granularity and identifiers for the responsible projects. A project </span><span class="c0">Grant</span><span>&nbsp;MAY be referenced using </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/funding&amp;sa=D&amp;source=editors&amp;ust=1683740231133911&amp;usg=AOvVaw11MNS1NxTRwVwmlcbVM449">funding</a></span><span class="c2">&nbsp;from the responsible project.</span></p><p class="c8"><span>It is RECOMMENDED to include TRE-specific ids under </span><span class="c0">identifier </span><span>(which MAY be an array). &nbsp;If the identifier is not globally unique (e.g. an integer rather than an UUID or URI), it is RECOMMENDED to add a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/appendix/implementation-notes.html%23repository-specific-identifiers&amp;sa=D&amp;source=editors&amp;ust=1683740231134364&amp;usg=AOvVaw0rTYJMsfbZJRbhGKP5WgU9">repository-specific identifier</a></span><span>&nbsp;and provide the local identifier as </span><span class="c0">value </span><span>of a </span><span class="c0">PropertyValue</span><span class="c2">&nbsp;entity. Multiple repository-specific identifiers MAY be included for different TREs from a single Project entity.</span></p><p class="c8"><span>The project MAY indicate the </span><span class="c0">member</span><span>&nbsp;organisations, in which case one of them SHOULD match the </span><span class="c0">affiliation</span><span>&nbsp;of the </span><span class="c0">Requesting Agent </span><span>with a </span><span class="c0">memberOf</span><span class="c2">&nbsp;to this project.</span></p><p class="c1"><span class="c4">{&quot;@id&quot;: &quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70&quot;,</span></p><p class="c1"><span class="c4">&nbsp;&quot;@type&quot;: &quot;Project&quot;,</span></p><p class="c1"><span class="c4">&nbsp;&quot;name&quot;: &quot;Investigation of cancer (TRE72 project 81)&quot;,</span></p><p class="c1"><span class="c12">&nbsp;&quot;identifier&quot;: [</span><span class="c4"><br> &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;_:localid:tre72:project81&quot;}</span></p><p class="c1"><span class="c12">&nbsp;</span><span class="c12">],<br> &quot;funding&quot;: [<br></span><span class="c12">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;@id&quot;: &quot;https://gtr.ukri.org/projects?ref=10038961&quot;</span><sup><a href="#cmnt11" id="cmnt_ref11">[k]</a></sup><span class="c4">,<br> ],<br> &quot;member&quot;: [<br> &nbsp; &nbsp;{&quot;@id&quot;: &quot;https://ror.org/027m9bs27&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; {&quot;@id&quot;: &quot;https://ror.org/01ee9ar58&quot;},</span></p><p class="c1"><span class="c4">&nbsp;]</span></p><p class="c1"><span class="c4">},<br>{ &quot;@id&quot;: &quot;_:localid:tre72:project81&quot;,<br> &nbsp;&quot;@type&quot;: &quot;PropertyValue&quot;,</span></p><p class="c1"><span class="c12">&nbsp; &quot;name&quot;: &quot;tre72&quot;,<br> &nbsp;&quot;value&quot;: &quot;project81&quot;<br>},<br>{ &quot;@id&quot;: &quot;</span><span class="c12">https://gtr.ukri.org/projects?ref=10038961</span><span class="c4">&quot;,<br> &nbsp;&quot;@type&quot;: &quot;Grant&quot;,<br> &nbsp;&quot;name&quot;: &quot;EOSC4Cancer&quot;<br>}</span></p><p class="c1 c20"><span class="c4"></span></p><h3 class="c10" id="h.huxgi8li5m37"><span class="c16 c11">Agreement Data</span></h3><p class="c8"><span class="c2 c29">The Agreement data relevant to a Researcher will specify:</span></p><p class="c8"><span class="c2 c29">- The projects which a researcher is a participate of;</span></p><p class="c8"><span class="c2 c29">- The data instances which each project is permitted access;</span></p><p class="c8"><span class="c2 c29">- The analysis types a project is permitted to perform, on each data instance.</span></p><p class="c8"><span class="c29">- The </span><span class="c29">permitted</span><span class="c2 c29">&nbsp;address to which responses can be sent for that project.</span></p><h3 class="c10" id="h.s12z41ajfn2b"><span class="c16 c11">Inputs</span></h3><p class="c1"><span class="c13">Requested inputs SHOULD be set on the </span><span class="c0 c13">CreateAction</span><span class="c13">&nbsp;using the </span><span class="c0 c13">object</span><span class="c13">&nbsp;property:<br></span><span class="c6 c37">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;#query-37252371-c937-43bd-a0a7-3680b48c0538&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;CreateAction&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;object&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;input1.txt&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;#enableFastMode&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;&hellip;&quot;: {}<br>}</span></p><p class="c8 c20"><span class="c2"></span></p><p class="c8"><span>Each input MUST have a corresponding data entity, which SHOULD have a </span><span class="c0">exampleOfWork </span><span class="c2">to a corresponding FormalParameter:</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;input1.txt&quot;,<br> &nbsp;&quot;@type&quot;: &quot;File&quot;,<br> &nbsp;&quot;name&quot;: &quot;input1&quot;,<br> &nbsp;&quot;exampleOfWork&quot;: {&quot;#sequence&quot;}<br>},<br>{</span></p><p class="c8"><span class="c4">&nbsp; &quot;@id&quot;: &quot;#enableFastMode&quot;,<br> &nbsp;&quot;@type&quot;: &quot;PropertyValue&quot;,<br> &nbsp;&quot;name&quot;: &quot;--fast-mode&quot;,<br> &nbsp;&quot;value&quot;: &quot;True&quot;,<br> &nbsp;&quot;exampleOfWork&quot;: {&quot;#fast&quot;} &nbsp;</span></p><p class="c8"><span class="c4">},<br>{ &quot;@id&quot;: &quot;#sequence&quot;,<br> &nbsp;&quot;@type&quot;: &quot;FormalParameter&quot;,<br> &nbsp;&quot;name&quot;: &quot;input-sequence&quot;<br>},</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;#fast&quot;,<br> &nbsp;&quot;@type&quot;: &quot;FormalParameter&quot;,<br> &nbsp;&quot;name&quot;: &quot;fast-mode&quot;<br>}</span></p><p class="c8"><span class="c22 c11">Tip</span><span class="c6">: While the </span><span class="c3 c25"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/workflows.html%23describing-inputs-and-outputs&amp;sa=D&amp;source=editors&amp;ust=1683740231138011&amp;usg=AOvVaw0Rit_xCBABYKAh6ZfxWBRl">FormalParameter</a></span><span class="c6">&nbsp;SHOULD match the definitions within the Workflow Crate referenced from </span><span class="c6 c0">mainEntity</span><span class="c6">, the only requirement from this profile is that their </span><span class="c6 c0">name</span><span class="c2">&nbsp;is programmatically recognized by the workflow engine for binding input parameters of the particular workflow. </span></p><h3 class="c10" id="h.qhzqt6p4xojs"><span class="c11 c16">Outputs</span></h3><p class="c8"><span>If the workflow has successfully executed, that is the </span><span class="c0">CreateAction</span><span>&nbsp;has </span><span class="c0">actionStatus</span><span>&nbsp;set to </span><span class="c0">CompletedActionStatus</span><span>, the output data entities SHOULD be referenced from the </span><span class="c0">results </span><span class="c2">array.</span></p><p class="c8"><span class="c22">Output entities MUST be described as in the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/wfrun/workflow/0.1&amp;sa=D&amp;source=editors&amp;ust=1683740231138876&amp;usg=AOvVaw3XpcaGtWQIfzBnANR0k0p8">Workflow Run Crate profile</a></span><span class="c22">, with type SHOULD be </span><span class="c22 c0">File</span><span class="c22">, </span><span class="c22 c0">Dataset</span><span class="c22">, </span><span class="c22 c0">Collection</span><span class="c22">, </span><span class="c22 c0">DigitalDocument </span><span class="c22">or </span><span class="c22 c0">PropertyValue</span><span class="c2">.</span></p><p class="c8"><span>Implementations MAY include the outputs within the Crate BagIt archive, in which case it is RECOMMENDED to use the folder </span><span class="c0">outputs/</span><span class="c2">&nbsp;to avoid conflict with other files in the crate.</span></p><p class="c1"><span class="c4">{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;#query-37252371-c937-43bd-a0a7-3680b48c0538&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;CreateAction&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;result&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;outputs/table.csv&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;outputs/diagrams/&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;&hellip;&quot;: {}<br>},</span></p><p class="c1"><span class="c4">{</span></p><p class="c1 c27"><span class="c4">&quot;@id&quot;: &quot;outputs/qa.csv&quot;,</span></p><p class="c1 c27"><span class="c4">&quot;@type&quot;: &quot;File&quot;,</span></p><p class="c1 c27"><span class="c4">&quot;encodingFormat&quot;: &quot;text/csv&quot;,</span></p><p class="c1 c27"><span class="c4">&quot;name&quot;: &quot;Tabular listing of quality assessment&quot;</span></p><p class="c1"><span class="c4">},</span></p><p class="c1"><span class="c4">{</span></p><p class="c1 c27"><span class="c4">&quot;@id&quot;: &quot;outputs/diagrams/&quot;,</span></p><p class="c1 c27"><span class="c4">&quot;@type&quot;: &quot;Dataset&quot;,</span></p><p class="c1 c27"><span class="c4">&quot;name&quot;: &quot;Diagrams of regions of interest&quot;</span></p><p class="c1"><span class="c4">}</span></p><p class="c8 c20"><span class="c2"></span></p><p class="c8"><span>Tip:</span><span class="c25">&nbsp;Implementations may need to inspect the FormalParameter of the Workflow Crate to propagate a human readable </span><span class="c0 c25">name</span><span class="c25">&nbsp;and </span><span class="c0 c25">encodingFormat</span><span class="c2">&nbsp;file format of the inputs and output.</span></p><h4 class="c17" id="h.41jkpsfb8xw9"><span class="c30 c32 c0 c13 c25">Sensitive data</span></h4><h3 class="c8" id="h.qg3lbaeyllk6"><span class="c6 c13">Outputs MAY include references to sensitive data that is only accessible from within the TRE or through URIs that require authentication. The requirement for permission SHOULD be indicated by typing the data entity as a </span><span class="c3 c13 c25"><a class="c9" href="https://www.google.com/url?q=https://schema.org/DigitalDocument&amp;sa=D&amp;source=editors&amp;ust=1683740231141353&amp;usg=AOvVaw2fi6wcZTtqMP433mXqi0xF">DigitalDocument</a></span><span class="c6 c13">&nbsp;that use </span><span class="c6 c0 c13">hasDigitalDocumentPermission</span><span class="c6 c13">&nbsp;to reference the </span><span class="c3 c13 c25"><a class="c9" href="https://www.google.com/url?q=http://schema.org/DigitalDocumentPermission&amp;sa=D&amp;source=editors&amp;ust=1683740231141650&amp;usg=AOvVaw255AYcDApHMFEGcevRLtNw">DigitalDocumentPermission</a></span><span class="c6 c13">&nbsp;entity, typically assigning </span><span class="c3 c12"><a class="c9" href="https://www.google.com/url?q=http://schema.org/ReadPermission&amp;sa=D&amp;source=editors&amp;ust=1683740231141863&amp;usg=AOvVaw2Sd0ct2yvYBUsFZ0Z4rrBC">http://schema.org/ReadPermission</a></span><span class="c12 c22">&nbsp;</span><span class="c6 c13">with </span><span class="c6 c0 c13">grantee</span><span class="c6 c13">&nbsp;to only to the </span><span class="c6 c0 c13">Responsible Project</span><span class="c6 c13">.</span></h3><h3 class="c26" id="h.qg3lbaeyllk6-1"><span class="c4">{</span></h3><h3 class="c5" id="h.qg3lbaeyllk6-2"><span class="c4">&quot;@id&quot;: &quot;urn:uuid:07b81e0f-7ac4-5428-9940-878b241e2397&quot;,</span></h3><h3 class="c5" id="h.qg3lbaeyllk6-3"><span class="c4">&quot;@type&quot;: &quot;DigitalDocument&quot;,</span></h3><h3 class="c5" id="h.qg3lbaeyllk6-4"><span class="c4">&quot;encodingFormat&quot;: &quot;text/csv&quot;,</span></h3><h3 class="c5" id="h.qg3lbaeyllk6-5"><span class="c4">&quot;name&quot;: &quot;Patient measurement 07b81e0f-7ac4-5428-9940-878b241e2397&quot;,</span></h3><h3 class="c5" id="h.qg3lbaeyllk6-6"><span class="c4">&quot;hasDigitalDocumentPermission&quot;: {&quot;@id&quot;: &quot;#permissions-07b81e0f&quot;},</span></h3><h3 class="c26" id="h.qg3lbaeyllk6-7"><span class="c4">},</span></h3><h3 class="c26" id="h.qg3lbaeyllk6-8"><span class="c4">{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;@id&quot;: &quot;#permissions-07b81e0f&quot;,</span></h3><h3 class="c26" id="h.qg3lbaeyllk6-9"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;&quot;@type&quot;: &quot;DigitalDocumentPermission&quot;,</span></h3><h3 class="c26" id="h.qg3lbaeyllk6-10"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;&quot;permissionType&quot;: &quot;http://schema.org/ReadPermission&quot;,</span></h3><h3 class="c26" id="h.ucfh2v4ebrnv"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp;&quot;grantee&quot;: { &quot;@id&quot;: &quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70&quot;}</span></h3><p class="c8"><span class="c4">}</span></p><p class="c8 c20"><span class="c2"></span></p><h3 class="c10" id="h.cp3ezi49utqi"><span class="c16 c11">Review process</span></h3><p class="c8"><span>The Five Safes RO-Crate may face several reviews both before and after workflow execution, automated and manual. To record that such review will or has taken place, a series of additional </span><span class="c3 c0"><a class="c9" href="https://www.google.com/url?q=https://schema.org/docs/actions.html&amp;sa=D&amp;source=editors&amp;ust=1683740231143883&amp;usg=AOvVaw3O5AVOBC4DO3-dy1INCA97">Action</a></span><span>&nbsp;contextual entities SHOULD be related to the root data entity using </span><span class="c0">mentions</span><span class="c2">.</span></p><p class="c8"><span>It is RECOMMENDED that the first step after authentication is a syntactic validation step that verifies the RO-Crate validity according to this profile and system expectations. This step SHOULD remove </span><span class="c0">mentions</span><span>&nbsp;references to any end-user-provided </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/AssessAction&amp;sa=D&amp;source=editors&amp;ust=1683740231144323&amp;usg=AOvVaw3Lo1diHbcbCiPYQ-WYKPSd">AssessAction</a></span><span class="c2">&nbsp;(as defined in this profile) from the submitted crate, in order to ensure only assessment endorsements by the particular TRE are considered in the subsequent internal processing.</span></p><p class="c8"><span>Assessment actions SHOULD indicate an </span><span class="c3"><a class="c9" href="#h.byrges19zp0h">actionStatus</a></span><span class="c0">&nbsp;</span><span>to reflect the outcome or pending nature of the assessment. Each assessment SHOULD have the root data entity (typically </span><span class="c12">{&quot;@id&quot;: &quot;./&quot;}</span><span>) listed under </span><span class="c0">object,</span><span class="c2">&nbsp;and MAY include additional entities that were assessed.</span></p><p class="c8"><span>The phase of the review process is indicated using subclasses of </span><span class="c0">Action</span><span>&nbsp;and more accurately with </span><span class="c0">additionalType </span><span>using terms from the Safe Haven Provenance (</span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/shp&amp;sa=D&amp;source=editors&amp;ust=1683740231145204&amp;usg=AOvVaw0hWj6GJ_3KHgUU7w_Cqjok">SHP</a></span><span>) ontology</span><span class="c4">.</span></p><p class="c8"><span>The </span><span class="c0">name</span><span>&nbsp;of the action MUST provide a human readable name of the type of check and its outcome, but SHOULD NOT be consulted by software for decision making (rather they should check </span><span class="c0">actionStatus </span><span>and </span><span class="c0">additionalType</span><span class="c2">).</span></p><p class="c8"><span>Each completed action SHOULD have a timestamp using </span><span class="c0">endTime</span><span>&nbsp;that follow the ISO-8601 syntax of </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC3339&amp;sa=D&amp;source=editors&amp;ust=1683740231145816&amp;usg=AOvVaw2UDvNd6LTld2pNQVq0x6YJ">RFC 3339</a></span><span>&nbsp;(including timezone or Z). </span><span class="c0">startTime</span><span class="c2">&nbsp;MAY be included for active, failed and completed actions.</span></p><p class="c8"><span>The main actor performing the assessment SHOULD be listed under </span><span class="c0">agent</span><span>&nbsp;and refer to either a </span><span class="c0">Organization</span><span>&nbsp;(e.g. an TRE helpdesk), </span><span class="c0">Person</span><span>&nbsp;(manual check) or a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/SoftwareApplication&amp;sa=D&amp;source=editors&amp;ust=1683740231146293&amp;usg=AOvVaw3mvS2TmaJH6bc5_tZ8x42c">SoftwareApplication</a></span><span>&nbsp;(automated check). A SoftwareApplication acting on behalf of a TRE MUST include a reference to the TRE </span><span class="c0">Organization</span><span>&nbsp;using </span><span class="c0">provider</span><span>. There may be multiple actors appearing as </span><span class="c0">agent</span><span>&nbsp;for different actions, each of which should be listed as contextual entities with at least </span><span class="c0">name</span><span class="c2">.</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;https://tre72.example.com/#crate-validator&quot;,<br> &nbsp;&quot;@type&quot;: &quot;SoftwareApplication&quot;,<br> &nbsp;&quot;name&quot;: &quot;RO-Crate validator at TRE72&quot;,<br> &nbsp;&quot;provider&quot;: {&quot;@id&quot;: &quot;https://tre72.example.com/&quot;}<br>},</span></p><p class="c8"><span class="c12">{ &quot;@id&quot;: &quot;https://tre72.example.com/&quot;,<br> &nbsp;&quot;@type&quot;: &quot;Organization&quot;,<br> &nbsp;&quot;name&quot;: &quot;TRE 72 trusted research environment at The University of Manchester&quot;,<br> &nbsp;&quot;parentOrganization&quot;: {&quot;@id&quot;: &quot;https://ror.org/027m9bs27&quot;}<br>}</span></p><h4 class="c17" id="h.ks36ufwv0i8h"><span class="c30 c32 c0 c13 c25">Check phase</span></h4><p class="c8"><span class="c2">Before any further processing, the content of a submitted crate SHOULD be checked for integrity and completeness against the BagIt payload manifest and tag manifest, considering at least the SHA-512 algorithm. This phase MAY also check any cryptographic signatures. <br>Example: </span></p><p class="c8"><span class="c12">{ &quot;@id&quot;: &quot;#check-f33fe90c-0c22-4c72-b299-de509028410e&quot;,<br> &nbsp;&quot;type&quot;: &quot;AssessAction&quot;,<br> &nbsp;&quot;additionalType&quot;: {&quot;@id&quot;: &quot;https://w3id.org/shp#CheckValue&quot;},<br> &nbsp;&quot;name&quot;: &quot;BagIt checksum of Crate: OK&quot;,<br> &nbsp;&quot;endTime&quot;: &quot;2023-04-18T12:11:45+01:00&quot;,<br> &nbsp;&quot;object&quot;: {&quot;@id&quot;: &quot;./&quot;},<br> &nbsp;&quot;instrument&quot;: {<br> &nbsp; &nbsp; &nbsp;&quot;@id&quot;: &quot;https://www.iana.org/assignments/named-information#sha-512&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;#validator-a4a66c63-2fe0-4c57-830d-268a40718313&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;</span><span class="c12">http://schema.org/CompletedActionStatus</span><span class="c4">&quot;<br>},</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;https://www.iana.org/assignments/named-information#sha-512&quot;,<br> &nbsp;&quot;@type&quot;: &quot;DefinedTerm&quot;,<br> &nbsp;&quot;name&quot;: &quot;sha-512 algorithm&quot;<br>}</span></p><p class="c8 c18"><span class="c11">Note</span><span>&nbsp;that subsequent modifications to the submitted crate by the TRE will necessarily mean checksums become out of date. It is RECOMMENDED to update the BagIt manifest following crate modifications if further TRE phases require checksum (e.g. after network transfer), however any subsequent internal checksum validations SHOULD NOT be recorded as an AssessAction. Checksums of the final crate MUST be updated by the </span><span class="c0">Publishing phase </span><span class="c2">and recorded accordingly.</span></p><p class="c8"><span>The check phase MAY perform any additional file-level security checks required by the particular TRE, e.g. maximum file size of crate, valid characters in filenames or use of symbolic links.</span></p><h4 class="c17" id="h.tpnnqqdw0ymf"><span class="c30 c32 c0 c13 c25">Validation phase</span></h4><p class="c8"><span>A crate that has been validated according to RO-Crate specifications and this profile SHOULD </span><span class="c0">mention</span><span>&nbsp;an </span><span class="c0">AssessAction </span><span>which </span><span class="c0">instrument</span><span>&nbsp;refers to the profile entity, and an </span><span class="c0">additionalType </span><span>referring to </span><span class="c12">https://w3id.org/shp#ValidationCheck. </span><span>Example:</span></p><p class="c8"><span class="c12">{ &quot;@id&quot;: &quot;#validate-1146f640-819e-4c86-b029-b763a0040896&quot;,<br> &nbsp;&quot;type&quot;: &quot;AssessAction&quot;,<br> &nbsp;&quot;additionalType&quot;: {&quot;@id&quot;: &quot;https://w3id.org/shp#ValidationCheck&quot;},<br> &nbsp;&quot;name&quot;: &quot;Validation against Five Safes Crate profile: approved&quot;,<br> &nbsp;&quot;startTime&quot;: &quot;2023-04-18T12:11:46+01:00&quot;,<br> &nbsp;&quot;endTime&quot;: &quot;2023-04-18T12:11:49+01:00&quot;,<br> &nbsp;&quot;object&quot;: {&quot;@id&quot;: &quot;./&quot;},<br> &nbsp;&quot;instrument&quot;: {&quot;@id&quot;: &quot;https://w3id.org/ro/five-safes/0.1-DRAFT&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;#validator-a4a66c63-2fe0-4c57-830d-268a40718313&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/CompletedActionStatus&quot;<br></span><span class="c2">}</span></p><p class="c8"><span>The validation phase MAY perform any additional syntactic or semantic checks required by the particular TRE and workflow, e.g. correspondence between provided and expected input parameters, in which case this should be reflected by adding such entities to </span><span class="c0">object</span><span>&nbsp;(checked) and </span><span class="c0">instrument</span><span class="c2">&nbsp;(expected) as arrays.</span></p><h4 class="c17" id="h.i7x3b9kj8m8j"><span class="c30 c32 c0 c13 c25">Workflow retrieval phase</span></h4><p class="c8"><span>The referenced workflow crate may be retrieved by the TRE before Sign-off or Workflow Execution, potentially using a local proxy (see </span><span class="c3"><a class="c9" href="#h.svx3e0hfb6k9">Finding the RO-Crate archive</a></span><span>&nbsp;and </span><span class="c3"><a class="c9" href="#h.nq7kiyxq67m3">Security considerations</a></span><span>). In this case, the retrieval SHOULD be indicated by a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/DownloadAction&amp;sa=D&amp;source=editors&amp;ust=1683740231148947&amp;usg=AOvVaw2EK8aYm-nb6hKmp5rOu-xy">DowloadAction</a></span><span>&nbsp;with the Workflow RO-Crate&rsquo;s distribution as </span><span class="c0">object </span><span class="c2">(indicating the URL that was downloaded from, potentially following Signposting). </span></p><p class="c8"><span>Implementations MAY choose to unpack and add the Workflow Crate folder to the Bagit, in which case it SHOULD be indicated as an additional data entity referenced as </span><span class="c0">result</span><span>, which reference the </span><span class="c0">mainEntity</span><span>&nbsp;from </span><span class="c0">sameAs</span><span>&nbsp;and the download location in </span><span class="c0">distribution</span><span class="c2">. </span></p><p class="c8"><span class="c2">Example:</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;#download-8b51bf57-6b29-44da-b24b-638c8df91639&quot;,<br> &nbsp;&quot;type&quot;: &quot;DownloadAction&quot;,<br> &nbsp;&quot;name&quot;: &quot;Downloaded workflow RO-Crate via proxy&quot;,<br> &nbsp;&quot;startTime&quot;: &quot;2023-04-18T12:11:50+01:00&quot;,<br> &nbsp;&quot;endTime&quot;: &quot;2023-04-18T12:11:52+01:00&quot;,<br> &nbsp;&quot;object&quot;: {&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289/ro_crate?version=1&quot;},<br> &nbsp;&quot;result&quot;: {&quot;@id&quot;: &quot;workflow/289/&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;http://proxy.example.com/&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/CompletedActionStatus&quot;<br>},<br>{<br> &nbsp;&quot;@id&quot;: &quot;workflow/289/&quot;,<br> &nbsp;&quot;sameAs&quot;: { &quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289?version=1&quot; },<br> &nbsp;&quot;@type&quot;: &quot;Dataset&quot;,<br> &nbsp;&quot;name&quot;: &quot;CWL Protein MD Setup tutorial with mutations&quot;,<br> &nbsp;&quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/workflowhub/workflow-ro-crate/1.0&quot;},<br> &nbsp;&quot;distribution&quot;: {<br> &nbsp; &nbsp;&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289/ro_crate?version=1&quot;}</span></p><p class="c8"><span class="c4">}</span></p><h4 class="c17" id="h.5nrqbjfi2n4g"><span>Sign-off</span><span class="c30 c32 c0 c13 c25">&nbsp;phase</span></h4><p class="c8"><span>Before executing a Five Safes Crate, the TRE SHOULD check if the requesting agent is permitted to execute the particular workflow on behalf of the responsible project. This SHOULD include checks against the Agreement policy data maintained by the TRE. This may be a manual and/or automated check, as indicated by </span><span class="c0">agent</span><span>. The </span><span class="c0">object</span><span class="c2">&nbsp;SHOULD additionally reference the workflow and responsible project (unless these were not part of the sign-off checks).</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;#signoff-3b741265-cfef-49ea-8138-a2fa149bf2f0&quot;,<br> &nbsp;&quot;type&quot;: &quot;AssessAction&quot;,<br> &nbsp;&quot;additionalType&quot;: {&quot;@id&quot;: &quot;https://w3id.org/shp#SignOff&quot;},<br> &nbsp;&quot;name&quot;: &quot;Sign-off of execution according to Agreement policy: approved&quot;,<br> &nbsp;&quot;endTime&quot;: &quot;2023-04-19T17:15:12+01:00&quot;,<br> &nbsp;&quot;object&quot;: [<br> &nbsp; &nbsp; &nbsp;{&quot;@id&quot;: &quot;./&quot;}, <br> &nbsp; &nbsp; &nbsp;{&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289?version=1&quot;},<br> &nbsp; &nbsp; &nbsp;{&quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70},<br> ],<br> &nbsp;&quot;instrument&quot;: {&quot;@id&quot;: &quot;https://tre72.example.com/agreement-policy/81&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;https://orcid.org/0000-0002-1825-0097&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/CompletedActionStatus&quot;<br>},</span></p><p class="c8"><span class="c12">{ &quot;@id&quot;: &quot;</span><span class="c12">https://tre72.example.com/agreement-policy/81</span><span class="c12">&quot;,<br> &nbsp;&quot;@type&quot;: &quot;CreativeWork&quot;,<br> &nbsp;&quot;name&quot;: &quot;Agreement policy for TRE72 for project 81&quot;,<br></span><span class="c2">},</span></p><h4 class="c17" id="h.vx47bcdtjrns"><span class="c30 c32 c0 c13 c25">Workflow execution phase</span></h4><p class="c8"><span>In this phase, the approved workflow execution is performed within the TRE. The </span><span class="c0">CreateAction</span><span>&nbsp;of the workflow execution will its </span><span class="c0">actionStatus</span><span>&nbsp;and acquire a </span><span class="c0">startTime </span><span>and </span><span class="c0">endTime</span><span class="c2">.</span></p><p class="c8"><span>When the execution is in CompletedActionStatus or FailedActionStatus, the crate SHOULD also follow the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/wfrun/provenance/0.1&amp;sa=D&amp;source=editors&amp;ust=1683740231150860&amp;usg=AOvVaw3b64Yun450WBps0XqLSqxs">Provenance Crate</a></span><span>&nbsp;profile, e.g. the workflow outputs data entities will be listed as </span><span class="c0">result.</span></p><h5 class="c31" id="h.uyr0r2dywnt2"><span class="c30 c32 c11 c38">Execution states</span></h5><p class="c8"><span>The states of the Five Safes Crate is indicated by the </span><span class="c0">actionStatus</span><span class="c2">&nbsp;of this main action:</span></p><ul class="c15 lst-kix_texyhxtn8mxf-0 start"><li class="c8 c18 c28 li-bullet-0"><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/PotentialActionStatus&amp;sa=D&amp;source=editors&amp;ust=1683740231151475&amp;usg=AOvVaw3IOXtDXokkV84g8wwzKI9E">http://schema.org/PotentialActionStatus</a></span><span>&nbsp;&ndash; </span><span>The request is queued to be executed</span></li><li class="c8 c18 c28 li-bullet-0"><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/ActiveActionStatus&amp;sa=D&amp;source=editors&amp;ust=1683740231151853&amp;usg=AOvVaw11bNdK7F5mV35SaoCkC3P4">http://schema.org/ActiveActionStatus</a></span><span class="c2">&nbsp;&ndash; The request is currently executing</span></li><li class="c8 c18 c28 li-bullet-0"><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/CompletedActionStatus&amp;sa=D&amp;source=editors&amp;ust=1683740231152126&amp;usg=AOvVaw1gpgiJbsQQ97MGvIeHK77_">http://schema.org/CompletedActionStatus</a></span><span>&nbsp;&ndash; </span><span>The request has finished successfully</span></li><li class="c8 c18 c28 li-bullet-0"><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://schema.org/FailedActionStatus&amp;sa=D&amp;source=editors&amp;ust=1683740231152459&amp;usg=AOvVaw2UcIF62w9CXxjzGRov2ThK">http://schema.org/FailedActionStatus</a></span><span class="c2">&nbsp;&ndash; The request failed, but may have partial results or logs. &nbsp;</span></li></ul><h5 class="c31" id="h.vmbikflzzdz8"><span class="c30 c38 c32 c11">Example</span></h5><p class="c1"><span class="c4">&nbsp; &nbsp;{</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@id&quot;: &quot;#query-37252371-c937-43bd-a0a7-3680b48c0538&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;@type&quot;: &quot;CreateAction&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/CompletetedActionStatus&quot;, <br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;startTime&quot;: &quot;2023-04-18T13:52:19+01:00&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;endTime&quot;: &quot;2023-04-18T14:00:19+01:00&quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;agent&quot;: {&quot;@id&quot;: &quot;https://orcid.org/0000-0001-9842-9718&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;instrument&quot;: {&quot;@id&quot;: &quot;https://workflowhub.eu/workflows/289?version=1&quot;},</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;name&quot;: &quot;Execute query 12389 on workflow &quot;,</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &quot;object&quot;: [</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {&quot;@id&quot;: &quot;input1.txt&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; &nbsp; &nbsp; ],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;result&quot;: [<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{ &quot;@id&quot;: &quot;result/matches.txt&quot;}<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{ &quot;@id&quot;: &quot;result/stats.txt&quot;}<br> &nbsp; &nbsp; &nbsp; &nbsp;]</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; }</span></p><p class="c1 c20"><span class="c4"></span></p><p class="c8"><span>Note that even if the workflow execution action is in CompletetedActionStatus, two additional phases are required to pass before the Five Safe Crate can be considered &ldquo;finished&rdquo;, see the following subsections.</span></p><h4 class="c17" id="h.fhos786fvyak"><span class="c30 c0 c13 c25 c32">Disclosure phase</span></h4><p class="c8"><span>Before workflow results are returned from the TRE, a disclosure check SHOULD be performed, e.g. to verify the workflow execution has not revealed sensitive data. Depending on the workflow and TRE data this may be automated and/or manual as indicated by </span><span class="c0">agent</span><span class="c2">.</span></p><p class="c8"><span>In the example below, a </span><span>person has been assigned, while</span><span>&nbsp;the </span><span class="c0">actionStatus</span><span>&nbsp;indicates the disclosure check is pending (</span><span class="c0">startTime</span><span>&nbsp;in this case indicating predicted waiting time into the future).</span><span><br><br></span><span class="c12">{ &quot;@id&quot;: &quot;#disclosure-b16c1f0a-ae7f-4582-9b28-7d9df3313e27&quot;,<br> &nbsp;&quot;type&quot;: &quot;AssessAction&quot;,<br> &nbsp;&quot;additionalType&quot;: {&quot;@id&quot;: &quot;https://w3id.org/shp#DisclosureCheck&quot;},<br> &nbsp;&quot;name&quot;: &quot;Disclosure check of workflow results: pending (estimate: 1 week)&quot;,<br> &nbsp;&quot;startTime&quot;: &quot;2023-04-25T16:00:00+01:00&quot;,<br> &nbsp;&quot;object&quot;: {&quot;@id&quot;: &quot;./&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;https://orcid.org/0000-0002-1825-0097&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/PotentialActionStatus</span><span class="c12">&quot;</span><span class="c12"><br></span><span class="c2">}</span></p><p class="c8"><span>If a crate fails the disclosure phase, its content such as workflow results MUST NOT be included in the returned crate returned to the user. Likewise, its workflow execution </span><span class="c0">CreateAction</span><span class="c2">&nbsp;and corresponding output data entities SHOULD be removed from the metadata file.</span></p><h4 class="c17" id="h.856k9eashjmk"><span class="c30 c32 c0 c13 c25">Publishing phase</span></h4><p class="c8"><span class="c2">Before a disclosure-approved Five Saves Crate is published to the requesting user (or archived in a repository), some housekeeping tasks are to be completed.</span></p><p class="c8"><span>The root data entity&rsquo;s </span><span class="c0">datePublished</span><span>&nbsp;SHOULD be updated to the time the manifest is last written. The </span><span class="c0">publisher</span><span>&nbsp;SHOULD be updated to reflect the executing TRE. The </span><span class="c0">mentions</span><span>&nbsp;MUST be expanded to include all the </span><span class="c0">AssessAction</span><span>s recorded by the TRE. </span><span class="c0">hasPart</span><span>&nbsp;MUST include (possibly through intermediate folders as </span><span class="c0">Dataset) </span><span>any </span><span class="c0">result</span><span>&nbsp;data entities now referred to from the workflow execution&rsquo;s </span><span class="c0">CreateAction</span><span class="c2">. </span></p><p class="c8"><span>The </span><span class="c3 c0"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/contextual-entities.html%23licensing-access-control-and-copyright&amp;sa=D&amp;source=editors&amp;ust=1683740231155327&amp;usg=AOvVaw0_oZ8UkvWdiKhZTRNBV5h5">licence</a></span><span class="c2">&nbsp;SHOULD be included to describe the licence of the workflow output data, either an open licence such as Creative Commons, or a restrictive (typically TRE-specific) conditions of access.</span></p><p class="c8"><span class="c12">{<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;@id&quot;: &quot;./&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;@type&quot;: &quot;Dataset&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;conformsTo&quot;: {&quot;@id&quot;: &quot;https://w3id.org/ro/five-safes/0.1-DRAFT&quot;},<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;datePublisher&quot;: &quot;2023-04-29T11:01:04+01:00&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;publisher&quot;: {&quot;@id&quot;: &quot;https://tre72.example.com/&quot;},<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;licence&quot;: {&quot;@id&quot;: &quot;</span><span class="c12">http://spdx.org/licenses/CC-BY-4.0</span><span class="c12">&quot;},<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;hasPart&quot;: [&hellip;],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;mainEntity&quot;: {&quot;@id&quot;: &quot;</span><span class="c12">https://workflowhub.eu/workflows/289?version=1</span><span class="c4">&quot;},<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;mentions&quot;: [&hellip;],<br> &nbsp; &nbsp; &nbsp; &nbsp;&quot;sourceOrganization&quot;: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;@id&quot;: &quot;#project-be6ffb55-4f5a-4c14-b60e-47e0951090c70&quot;}</span></p><p class="c1"><span class="c4">&nbsp; &nbsp; }</span></p><p class="c8"><span class="c4">},<br>{ &quot;@id&quot;: &quot;https://spdx.org/licenses/CC-BY-4.0&quot;,<br> &nbsp;&quot;@type&quot;: &quot;CreativeWork&quot;,<br> &nbsp;&quot;name&quot;: &quot;Creative Commons Attribution 4.0 International&quot;, <br> &nbsp;&quot;identifier&quot;: &quot;CC-BY-4.0&quot;<br>}</span></p><p class="c8"><span>TRE implementations MAY additionally </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/provenance.html%23recording-changes-to-ro-crates&amp;sa=D&amp;source=editors&amp;ust=1683740231156202&amp;usg=AOvVaw3Y5bD_eKYXI2fraZI2LQ6V">record changes</a></span><span>&nbsp;to the RO-Crate as it has progressed through the execution, by associating a </span><span class="c0">CreateAction</span><span>&nbsp;and subsequent </span><span class="c0">UpdateAction</span><span>&nbsp;to the root data entity as </span><span class="c0">object</span><span>.</span></p><p class="c8"><span>Following the final update of the RO-Crate Metadata file and content, the</span><span>&nbsp;BagIt payload manifests and tag manifests MUST be updated (as a minimum because the </span><span class="c0">ro-crate-metadata.json</span><span>&nbsp;has been modified). The </span><span class="c0">result</span><span>&nbsp;entity is NOT recorded, as </span><span class="c12">../manifest-sha512.txt</span><span class="c2">&nbsp;would have escaped the RO-Crate root. The agent SHOULD delete manifest files it can&rsquo;t re-generate. After the checksum calculation, the TRE SHOULD not do any further changes to the crate or BagIt files. </span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;#bagit-ce785c0b-c988-4043-8cbd-1489dcebc14f&quot;,<br> &nbsp;&quot;type&quot;: &quot;AssessAction&quot;,<br> &nbsp;&quot;startTime&quot;: &quot;2023-04-29T12:12:25+01:00&quot;,<br> &nbsp;&quot;additionalType&quot;: {&quot;@id&quot;: &quot;https://w3id.org/shp#GenerateCheckValue&quot;},<br> &nbsp;&quot;name&quot;: &quot;BagIt manifests of Crate updated&quot;,<br> &nbsp;&quot;object&quot;: {&quot;@id&quot;: &quot;./&quot;},<br> &nbsp;&quot;instrument&quot;: {<br> &nbsp; &nbsp; &quot;@id&quot;: &quot;https://www.iana.org/assignments/named-information#sha-512&quot;},<br> &nbsp;&quot;agent&quot;: {&quot;@id&quot;: &quot;#validator-a4a66c63-2fe0-4c57-830d-268a40718313&quot;},<br> &nbsp;&quot;actionStatus&quot;: &quot;http://schema.org/CompletedActionStatus&quot;<br>},</span></p><p class="c8"><span class="c4">{ &quot;@id&quot;: &quot;https://www.iana.org/assignments/named-information#sha-512&quot;,<br> &nbsp;&quot;@type&quot;: &quot;DefinedTerm&quot;,<br> &nbsp;&quot;name&quot;: &quot;sha-512 algorithm&quot;<br>}</span></p><p class="c8 c18"><span class="c11">Note: </span><span>This action must be written to the</span><span class="c0">&nbsp;</span><span>RO-Crate Metadata File </span><span class="c0">before </span><span>calculating the payload manifest, and therefore can&rsquo;t include the correct </span><span class="c0">endTime</span><span>. The </span><span class="c0">actionStatus</span><span>&nbsp;should nevertheless reflect the status as if it has already completed. Likewise, the payload manifest must be calculated before updating the tag manifest, as it includes the checksum of the payload manifest.</span></p><h4 class="c17" id="h.zgj56r43tp0i"><span class="c30 c32 c0 c13 c25">Receiving phase </span></h4><p class="c8"><span>Clients receiving a Five-Safe Crate SHOULD check the BagIt manifest checksums similar to the </span><span class="c0">Check phase</span><span class="c2">, as well as the status of all the actions specified in this profile before further processing. </span></p><p class="c8"><span class="c2">It is NOT sufficient for clients to check the publishing AssessAction, as TRE implementations are permitted to expose partial crates which have failed approval phases or which are in pending/execution state.</span></p><p class="c8"><span>Clients MAY add additional post-processing data and/or metadata not specified in this profile to the crate (e.g. </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/ReceiveAction&amp;sa=D&amp;source=editors&amp;ust=1683740231157803&amp;usg=AOvVaw22qu3NMVxzZviQHqV4cZdC">ReceiveAction</a></span><span>),</span><span>&nbsp;in which case they SHOULD maintain the BagIt manifests accordingly. Manifest checksums can be used to detect accidental local changes in post-processing.</span></p><p class="c1 c20"><span class="c4"></span></p><p class="c1 c20"><span class="c2"></span></p><p class="c1 c20"><span class="c2"></span></p><h2 class="c24" id="h.nq7kiyxq67m3"><span>Security considerations</span><sup><a href="#cmnt12" id="cmnt_ref12">[l]</a></sup></h2><p class="c8"><span>It is RECOMMENDED that implementers apply strong access control before accepting a Five Safes Crate</span><span class="c2">. </span></p><p class="c8"><span>Allowing execution of any Workflow Crate effectively allows execution of arbitrary code. It is RECOMMENDED to check against a list of pre-approved workflows (see </span><span class="c3"><a class="c9" href="#h.5nrqbjfi2n4g">Sign-off phase</a></span><span class="c2">), e.g. using file checksums or cryptographic signatures. </span></p><p class="c8"><span>Clients parsing and unpacking ZIP files, JSON metadata, workflow definitions and BagIt manifests SHOULD apply reasonable security measures to limit the possibility of an attacker to consume excessive disk, CPU or memory resources, as well as escaping any file directory or execution container jails. For instance, </span><span>clients </span><sup><a href="#cmnt13" id="cmnt_ref13">[m]</a></sup><span>should check for invalid file path characters, relative paths or symbolic links escaping the crate, as well guard against </span><span class="c0">zip bomb</span><span class="c2">&nbsp;attacks.</span></p><p class="c8"><span class="c2">Pre-approved workflows could be exploited by a malicious attacker if they, the workflow engine or their tools themselves have security vulnerabilities, e.g. by using hand-crafted input parameters that by-passes command line escapes. Workflow executions are not guaranteed to complete in a given timescale; sufficient timeouts and resource usage restrictions SHOULD therefore be applied by the workflow engine.</span></p><p class="c8"><span>It is currently out of scope for this specification how to verify that Five Saves Crate was requested by the given person, or how to verify if the person has access to a particular TRE according to their Agreement policies. It is therefore RECOMMENDED that implementers check authentication and authorization of a submitted query and use strong encryption. Implementers SHOULD check that the @id and affiliation of the </span><span class="c0">Requesting Agent</span><span>&nbsp;and </span><span class="c0">Responsible Project c</span><span class="c2">orresponds to the authentication, and MAY inject/overwrite client-submitted data.</span></p><p class="c8"><span>Malicious clients submitting a Five Safes Crate may have included additional entities, properties and types, which may cause security concerns in an implementation. Implementers SHOULD sanity check inputs, including ensuring that all paths are relative within the bag or absolute URIs, and MUST remove references to any client-submitted </span><span class="c0">AssessAction</span><span class="c2">s, as these could be used to bypass the TRE compliance process.</span></p><p class="c8"><span>Malicious clients MAY attempt to reference URLs or IP addresses that are only accessible within a TRE. Implementers MUST perform any URL downloads (such as Workflow RO-Crates or container images) in a way that does not access the secured TRE network, e.g. from a </span><span class="c0">Demilitarized Zone </span><span class="c2">(DMZ) with a network firewall restricting access to the TRE, or through a proxying repository controlled by TRE administrators.</span></p><p class="c8"><span>As an executed Five Saves Crate may be intended for publishing (possibly following an embargo period), it SHOULD NOT include sensitive data or security tokens within the metadata file or the BagIt archive (e.g. in configuration or log files); TREs SHOULD verify this in the </span><span class="c0">Disclosure Phase.</span><span class="c2">&nbsp;It is RECOMMENDED to use keychain services or time-limited security access tokens that can be assured to be expired before the Crate is published.</span></p><p class="c8"><span>The crate MAY include references (e.g. S3 URIs) to sensitive data, in which case the implementation and executed workflow SHOULD protect against divulging sensitive information (directly or indirectly) in the </span><span class="c0">File</span><span>&nbsp;identifiers, use </span><span>UUID v5 hashing </span><sup><a href="#cmnt14" id="cmnt_ref14">[n]</a></sup><span>[</span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/rfc4122&amp;sa=D&amp;source=editors&amp;ust=1683740231160335&amp;usg=AOvVaw3KaLndftMd0JpY8Mzq4zHi">RFC4122</a></span><span>] &nbsp;to hide sensitive identifiers.</span><span class="c12">&nbsp;</span><span class="c11">Note</span><span>: predicable identifiers like </span><span class="c12">patient-456</span><span>&nbsp;would still be vulnerable in such hashing due to iteration attacks.</span><span class="c4"><br></span></p><h2 class="c24" id="h.gt4cqu5xnzyv"><span class="c11 c19">Media type and profiles</span></h2><p class="c8"><span class="c2">When transferring a HTTP Five Safes Crate using HTTP, implementations SHOULD use the following HTTP headers for content-type and profile:</span></p><p class="c8"><span class="c12">Content-Type: application/zip<br>Link: &lt;https://w3id.org/ro/crate&gt;; rel=&quot;profile&quot;</span><span class="c2"><br></span></p><p class="c8"><span>HTML landing pages that reference a Five Safes Crate SHOULD include </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://signposting.org/&amp;sa=D&amp;source=editors&amp;ust=1683740231161143&amp;usg=AOvVaw3J2TsDCoawfYwt1IuFHxzx">Signposting</a></span><span>&nbsp;using HTTP </span><span class="c12">Link </span><span class="c2">headers that refer to the Crate&rsquo;s ZIP download and the RO-Crate profile:</span></p><p class="c8"><span class="c12">Link: &lt;https://example.com/query-12389.zip&gt;; rel=&quot;item&quot;, type=&quot;application/zip&quot;<br>Link: &lt;https://w3id.org/ro/crate&gt;; rel=&quot;profile&quot;; type=&quot;application/zip&quot;;<br> &nbsp; anchor=&quot;https://example.com/query-12389.zip&quot;</span><span class="c2"><br></span></p><p class="c8"><span>Implementations MAY also provide direct public access to the RO-Crate metadata file, in which case they SHOULD follow the </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.2-DRAFT/appendix/jsonld.html%23ro-crate-json-ld-media-type&amp;sa=D&amp;source=editors&amp;ust=1683740231161693&amp;usg=AOvVaw1oSJUGWtpe_le0A23rOLax">RO-Crate media type recommendations</a></span><span>&nbsp;for JSON-LD, in which case it is RECOMMENDED to convert the metadata file to </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.2-DRAFT/appendix/relative-uris.html%23converting-from-attached-to-detached-ro-crate&amp;sa=D&amp;source=editors&amp;ust=1683740231161962&amp;usg=AOvVaw2ELTwTeQAQbLXrBow0YCov">Detached RO-Crate</a></span><span>&nbsp;by establishing a </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://www.researchobject.org/ro-crate/1.1/appendix/relative-uris.html%23establishing-a-base-uri-inside-a-zip-file&amp;sa=D&amp;source=editors&amp;ust=1683740231162215&amp;usg=AOvVaw3WI-n5tCPkKgyoTMDwaMJj">base URI</a></span><span>&nbsp;based on the BagIt </span><span class="c12">External-Identifier</span><span>&nbsp;UUID (e.g. </span><span class="c12">arcp://uuid,9796155a-fe44-4614-89b8-71945f718ffb/</span><span>).</span></p><h2 class="c24" id="h.vtdqnj2rk40d"><span class="c19 c11">References</span></h2><p class="c8"><span>[</span><span>FIPS 180-4</span><span>] Secure Hash Standard (SHS) </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.6028/NIST.FIPS.180-4&amp;sa=D&amp;source=editors&amp;ust=1683740231162834&amp;usg=AOvVaw0B2Y1Tjiz5BT_8jMC6lIPo">https://doi.org/10.6028/NIST.FIPS.180-4</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[Provenance Run Crate] Provenance Run Crate profile </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/wfrun/provenance/0.1&amp;sa=D&amp;source=editors&amp;ust=1683740231163117&amp;usg=AOvVaw2dSJg4MTSP7nNJVToA0eF4">https://w3id.org/ro/wfrun/provenance/0.1</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[RFC2119] Key words for use in RFCs to Indicate Requirement Levels </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC2119&amp;sa=D&amp;source=editors&amp;ust=1683740231163428&amp;usg=AOvVaw1yemPfL5kZj8aR6OZtkmS-">https://doi.org/10.17487/RFC2119</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[</span><span>RFC3339</span><span>] Date and Time on the Internet: Timestamps </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC3339&amp;sa=D&amp;source=editors&amp;ust=1683740231163786&amp;usg=AOvVaw2UfDwriLhhnuPuFO_FytaH">https://doi.org/10.17487/RFC3339</a></span></p><p class="c8 c23"><span>[RFC4122] A Universally Unique IDentifier (UUID) URN Namespace <br></span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/rfc4122&amp;sa=D&amp;source=editors&amp;ust=1683740231164190&amp;usg=AOvVaw0WmkhHp6N-OuzzYOpV0i8p">https://doi.org/10.17487/rfc4122</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[RFC8174] Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/RFC8174&amp;sa=D&amp;source=editors&amp;ust=1683740231164500&amp;usg=AOvVaw2UKWaJGrNW1LVgJaqtPBUR">https://doi.org/10.17487/RFC8174</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[RFC8493] The BagIt File Packaging Format (V1.0)<br></span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://doi.org/10.17487/rfc8493&amp;sa=D&amp;source=editors&amp;ust=1683740231164794&amp;usg=AOvVaw3I5leXmHEyCRqEI49uyDM8">https://doi.org/10.17487/rfc8493</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[RO-Crate 1.1] RO-Crate Metadata Specification 1.1<br></span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/crate/1.1&amp;sa=D&amp;source=editors&amp;ust=1683740231165070&amp;usg=AOvVaw2zS-obseu7Lv5EtHhTXmTc">https://w3id.org/ro/crate/1.1</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[RO-Crate] Research Object Crate (RO-Crate)<br></span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/crate&amp;sa=D&amp;source=editors&amp;ust=1683740231165335&amp;usg=AOvVaw3U1GHsF1kr6oeaT2zIRENq">https://w3id.org/ro/crate</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[schema] Schema.org vocabulary </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/&amp;sa=D&amp;source=editors&amp;ust=1683740231165611&amp;usg=AOvVaw2EV09bU7ryJGUUPcdiXP4F">https://schema.org/</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[schema Action] Schema.org potential action </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://schema.org/docs/actions.html&amp;sa=D&amp;source=editors&amp;ust=1683740231165895&amp;usg=AOvVaw3vb0vbH8QX1FdEo_l4Dd5O">https://schema.org/docs/actions.html</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[Signposting] Signposting the Scholarly Web </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://signposting.org/&amp;sa=D&amp;source=editors&amp;ust=1683740231166160&amp;usg=AOvVaw3OTJ4-2KhNPBbcxiGP1TQw">https://signposting.org/</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[Workflow RO-Crate] Workflow RO-Crate profile </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/workflowhub/workflow-ro-crate/1.0&amp;sa=D&amp;source=editors&amp;ust=1683740231166458&amp;usg=AOvVaw1MRSzkS9040stO8Zv0T_VS">https://w3id.org/workflowhub/workflow-ro-crate/1.0</a></span><span class="c2">&nbsp;</span></p><p class="c8 c23"><span>[Workflow Run Crate] Workflow Run Crate profile </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=https://w3id.org/ro/wfrun/workflow/0.1&amp;sa=D&amp;source=editors&amp;ust=1683740231166795&amp;usg=AOvVaw0Aa_w3ORQwvM9Ibzd-Fg0p">https://w3id.org/ro/wfrun/workflow/0.1</a></span><span class="c2">&nbsp;</span></p><p class="c8"><span>[ZIP] APPNOTE.TXT - .ZIP File Format Specification 6.3.8 </span><span class="c3"><a class="c9" href="https://www.google.com/url?q=http://www.pkware.com/documents/casestudies/APPNOTE.TXT&amp;sa=D&amp;source=editors&amp;ust=1683740231167093&amp;usg=AOvVaw2UCeTKOTxwOg-HKrSx2gE9">http://www.pkware.com/documents/casestudies/APPNOTE.TXT</a></span><span>&nbsp;</span></p><div class="c14"><p class="c7"><a href="#cmnt_ref1" id="cmnt1">[a]</a><span class="c21 c6 c13">It appears to me that to support Remote Analysis, in a manner compliant&nbsp;with the Five Safes, three things need to be in place, and mutually aligned:</span></p><p class="c7"><span class="c21 c6 c13">- Researcher provides a precise&nbsp;(and verifiable) description&nbsp;of the Analysis Requested;</span></p><p class="c7"><span class="c21 c6 c13">- TRE retains a description of the Context in which Analysis will be performed;</span></p><p class="c7"><span class="c21 c6 c13">- TRE maintains Analysis Platforms which can validate and execute Analysis Request, in the correct Context.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref2" id="cmnt2">[b]</a><span class="c21 c6 c13">Poll now over name:</span></p><p class="c7"><span class="c21 c6 c13">- TRE-FX Crate (https://trefx.uk/tre-fx-crate)</span></p><p class="c7"><span class="c21 c6 c13">- TRE Crate (https://trefx.uk//tre-crate)</span></p><p class="c7"><span class="c21 c6 c13">- Five Safes Crate (https://trefx.uk/five-safes-crate)</span></p><p class="c7"><span class="c21 c6 c13">- Trusted Request Crate (https://trefx.uk/trusted-request-crate)</span></p><p class="c7"><span class="c21 c6 c13">- Request Crate (https://trefx.uk/request-crate)</span></p><p class="c7"><span class="c6 c13 c21">- Trusted Workflow Run Crate (https://trefx.uk/trusted-wfrun-crate)</span></p><p class="c7 c20"><span class="c21 c6 c13"></span></p><p class="c7"><span class="c21 c6 c13">Vote in Slack: https://elixir-uknode.slack.com/archives/C04PCSKV6NL/p1683713456367009</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref3" id="cmnt3">[c]</a><span class="c21 c6 c13">Would it be correct to assume in the case of an analysis request is sent to multiple TREs each would have the same &quot;external-Identifier&quot;. I was assuming that each request would need to be slightly rewritten, for example, change the researcherID to match the TRE naming scheme. So would contain an &quot;analysis request identifier&quot;, which would be associated with a number of RO_Crates with slightly&nbsp;different content and different&nbsp;&quot;external-Identifier&quot;</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref4" id="cmnt4">[d]</a><span class="c21 c6 c13">I think we would need a bit more in the crate to handle federation with handovers as well as indicating what is the &#39;next&#39; step that this particular TRE is meant to do.&nbsp; Or perhaps we will do nested crates for that? It depends how we represent the &quot;master&quot; workflow across TREs.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref5" id="cmnt5">[e]</a><span class="c21 c6 c13">Note: Currently 1.2-DRAFT </span></p><p class="c7"><span class="c21 c6 c13">https://www.researchobject.org/ro-crate/1.2-DRAFT/ due for release in a few weeks.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref6" id="cmnt6">[f]</a><span class="c21 c6 c13">I would expect the researcher (agent) would need to specify which project&nbsp;they are requesting on behalf of. As a researcher could be part of multiple projects, each with distinct access rights.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref7" id="cmnt7">[g]</a><span class="c21 c6 c13">Should read the next bit!</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref8" id="cmnt8">[h]</a><span class="c21 c6 c13">Does this mean that any employee is permitted to see the results. I would expect the granularity&nbsp;of affiliation would&nbsp;be much smaller, and match the TRE&#39;s access control group.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref9" id="cmnt9">[i]</a><span class="c21 c6 c13">Again need to read further...</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref10" id="cmnt10">[j]</a><span class="c21 c6 c13">perhaps the person should also be a &quot;memberOf&quot; the Project, if that represents TRE access rights, rather than indirectly through the person&#39;s affiliation. If I get access on behalf of UNIMAN to a TRE, anyone else at UNIMAN won&#39;t necessarily have access. This should of course be checked to be genuine in later phases.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref11" id="cmnt11">[k]</a><span class="c21 c6 c13">TODO: Find a more TRE-specific example</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref12" id="cmnt12">[l]</a><span class="c21 c6 c13">As part of the Pioneer manual results checking process, is to ensure the results aren&#39;t disclosive. It appears two of the inputs to this process are a Data Sharing Agreement and a Data Request Form: https://www.pioneerdatahub.co.uk/data/data-request-form/</span></p><p class="c7 c20"><span class="c21 c6 c13"></span></p><p class="c7"><span class="c21 c6 c13">Should the Request RO-Crate contain a reference to the applicable DSA and the contains of the DRF?</span></p><p class="c7 c20"><span class="c21 c6 c13"></span></p><p class="c7"><span class="c21 c6 c13">I would argue that this means the Results RO-Crate should contain the Request RO-Crate.</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref13" id="cmnt13">[m]</a><span class="c21 c6 c13">clients (research organizations?) and servers (TREs?)</span></p></div><div class="c14"><p class="c7"><a href="#cmnt_ref14" id="cmnt14">[n]</a><span class="c21 c6 c13">Perhaps content-based identifier is better as they would leak nothing except the checksum of the output file -- and would be easier to set up reverse mapping for on the file server side.</span></p><p class="c7"><span class="c21 c6 c13">Naming Things With Hashes:</span></p><p class="c7"><span class="c21 c6 c13">https://www.rfc-editor.org/rfc/rfc6920.html</span></p></div></body></html>